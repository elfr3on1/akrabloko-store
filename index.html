<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  
   <link rel="icon" href="images/logo.png" type="image/png">

    <meta property="og:image" content="https://akrabloko.vercel.app/images/banner.jpg">
<meta property="og:title" content="Ø£Ù‚Ø±Ø¨Ù„ÙˆÙƒÙˆ - Ù…Ø§Ø±ÙƒØª Ø§Ù„Ø³Ø¹Ø§Ø¯Ø©">
<meta property="og:description" content="Ø£Ø·Ù„Ø¨ Ù‚Ù‡ÙˆØªÙƒØŒ Ø´ÙŠØ¨Ø³ÙŠØŒ ÙˆÙƒÙ„ Ø·Ù„Ø¨Ø§ØªÙƒ Ø§ÙˆÙ†Ù„Ø§ÙŠÙ† ÙˆØªÙˆØµÙ„Ùƒ Ù„Ø­Ø¯ Ø¹Ù†Ø¯Ùƒ!">
 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ù‚Ø±Ø¨Ù„ÙˆÙƒÙˆ | Akrabloko Store</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts (Cairo) -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        neonBlue: '#00f3ff',
                        neonPink: '#bc13fe',
                        neonGreen: '#39ff14',
                        darkBg: '#050505',
                        cardBg: '#111111'
                    },
                    fontFamily: {
                        cairo: ['Cairo', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #050505;
            color: #fff;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        /* Neon Text Effect */
        .neon-text-blue { text-shadow: 0 0 8px #00f3ff; }
        .neon-text-pink { text-shadow: 0 0 8px #bc13fe; }
        
        /* Neon Box Effect */
        .neon-box {
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .neon-box:hover {
            border-color: #bc13fe;
            box-shadow: 0 0 15px rgba(188, 19, 254, 0.3);
            transform: translateY(-4px);
        }

        /* Animations */
        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .animate-slide { animation: slideUp 0.3s ease-out forwards; }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1a1a1a; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #bc13fe; border-radius: 4px; }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .category-btn.active {
            background: linear-gradient(135deg, #bc13fe, #6a00ff);
            color: white;
            box-shadow: 0 0 15px rgba(188, 19, 254, 0.5);
            border: none;
        }

        /* Input Styles */
        .custom-input {
            width: 100%;
            background: #1a1a1a;
            border: 1px solid #333;
            color: white;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.3s;
        }
        .custom-input:focus {
            outline: none;
            border-color: #00f3ff;
            box-shadow: 0 0 10px rgba(0, 243, 255, 0.2);
        }
    </style>
</head>
<body class="pb-32 relative">

    <!-- Navbar -->
    <nav class="fixed top-0 w-full z-50 bg-black/90 backdrop-blur-xl border-b border-white/10 shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <div class="text-2xl font-black tracking-tighter leading-none flex items-center gap-1">
                    <span class="text-white">Ø£Ù‚Ø±Ø¨</span><span class="text-neonPink neon-text-pink">Ù„ÙˆÙƒÙˆ</span>
                    <i class="fas fa-rocket text-neonBlue text-xl animate-pulse ml-1 transform -rotate-45"></i>
                </div>
            </div>
            <div class="flex items-center gap-2 bg-gray-900 border border-gray-700 rounded-full px-3 py-1">
                <span class="relative flex h-2 w-2">
                  <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                  <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
                </span>
                <span class="text-[10px] font-bold text-gray-300">Ù…ÙØªÙˆØ­ 24H</span>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <header class="relative mt-20 mb-6 px-4 text-center">
        <div class="bg-gradient-to-b from-gray-900 to-black rounded-3xl p-6 border border-gray-800 relative overflow-hidden">
            <div class="absolute -top-10 -right-10 w-40 h-40 bg-neonPink blur-[80px] opacity-10"></div>
            <div class="absolute -bottom-10 -left-10 w-40 h-40 bg-neonBlue blur-[80px] opacity-10"></div>
            <h1 class="text-2xl md:text-3xl font-black mb-2 text-white">
                Ø£Ù‚Ø±Ø¨ Ù…Ø§Ø±ÙƒØª <span class="text-neonBlue">Ù„Ø¯Ù…Ø§ØºÙƒ</span> ğŸš€
            </h1>
            <p class="text-gray-400 text-xs md:text-sm max-w-md mx-auto">
                Ù…Ù† Ø§Ù„Ø¥Ø¨Ø±Ø© Ù„Ù„ØµØ§Ø±ÙˆØ®.. Ù…Ø²Ø§Ø¬Ùƒ ÙˆØ·Ù„Ø¨Ø§Øª Ø¨ÙŠØªÙƒ ØªÙˆØµÙ„Ùƒ ÙÙŠ Ø«ÙˆØ§Ù†ÙŠ.
            </p>
        </div>
    </header>

    <!-- Main Content -->
    <section class="container mx-auto px-3 md:px-4 mb-12">
        <!-- Search -->
        <div class="relative mb-6 group">
            <input type="text" id="searchInput" onkeyup="searchProducts()" placeholder="Ø¹Ø§ÙŠØ² Ø¨Ù†ØŒ Ø¥Ù†Ø¯ÙˆÙ…ÙŠØŒ Ø³Ø¬Ø§ÙŠØ±ØŸ" 
                class="w-full bg-gray-900/80 border border-gray-700 text-white rounded-2xl py-3.5 px-11 focus:outline-none focus:border-neonBlue focus:ring-1 focus:ring-neonBlue transition duration-300">
            <i class="fas fa-search absolute right-4 top-4 text-gray-500 group-focus-within:text-neonBlue transition-colors"></i>
        </div>

        <!-- Categories -->
        <div class="sticky top-[60px] z-40 bg-[#050505]/95 backdrop-blur-sm py-2 mb-2 -mx-4 px-4 border-b border-white/5">
            <div class="flex overflow-x-auto gap-2 no-scrollbar pb-1">
                <button onclick="filterProducts('all')" class="category-btn active px-4 py-2 rounded-xl border border-gray-700 bg-gray-800 text-xs font-bold transition-all">Ø§Ù„ÙƒÙ„</button>
                <button onclick="filterProducts('grocery')" class="category-btn px-4 py-2 rounded-xl border border-gray-700 bg-gray-800 text-xs font-bold transition-all"><i class="fas fa-shopping-basket mr-1"></i> Ø§Ù„Ø¨Ù‚Ø§Ù„Ø©</button>
                <button onclick="filterProducts('snacks')" class="category-btn px-4 py-2 rounded-xl border border-gray-700 bg-gray-800 text-xs font-bold transition-all"><i class="fas fa-cookie-bite mr-1"></i> Ù†Ù‚Ù†Ù‚Ø©</button>
                <button onclick="filterProducts('drinks')" class="category-btn px-4 py-2 rounded-xl border border-gray-700 bg-gray-800 text-xs font-bold transition-all"><i class="fas fa-wine-bottle mr-1"></i> Ù…Ø´Ø±ÙˆØ¨Ø§Øª</button>
                <button onclick="filterProducts('mood')" class="category-btn px-4 py-2 rounded-xl border border-gray-700 bg-gray-800 text-xs font-bold transition-all"><i class="fas fa-smoking mr-1"></i> Ø§Ù„Ù…Ø²Ø§Ø¬</button>
            </div>
        </div>

        <!-- Products Grid -->
        <div id="products-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 md:gap-4 mb-8">
            <!-- JS populated -->
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black border-t border-gray-800 py-8 mt-auto relative z-10 text-center">
        <div class="container mx-auto px-4">
            <h2 class="text-2xl font-black text-white mb-2">Ø£Ù‚Ø±Ø¨<span class="text-neonPink">Ù„ÙˆÙƒÙˆ</span></h2>
            <p class="text-gray-500 text-sm mb-4">Ø®Ø¯Ù…Ø© ØªÙˆØµÙŠÙ„ 24 Ø³Ø§Ø¹Ø© - Ø£Ø³Ø±Ø¹ Ø¯Ù„ÙŠÙØ±ÙŠ ÙÙŠ Ù…ØµØ±</p>
            <div class="border-t border-gray-800 pt-6">
                <p class="text-neonBlue font-bold text-lg mb-1"><i class="fas fa-phone-alt mr-2"></i> 01000000000</p>
                <p class="text-gray-600 text-xs">Â© 2025 Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Ù„Ù€ Ø£Ù‚Ø±Ø¨Ù„ÙˆÙƒÙˆ</p>
            </div>
        </div>
    </footer>

    <!-- Floating Cart Button -->
    <div class="fixed bottom-5 left-4 right-4 z-40 max-w-lg mx-auto">
        <button onclick="toggleCart()" class="w-full bg-gray-900 border border-neonPink/50 text-white rounded-2xl shadow-[0_4px_20px_rgba(188,19,254,0.3)] overflow-hidden group">
            <div class="bg-gradient-to-r from-neonPink/10 to-purple-900/20 backdrop-blur-md py-3 px-5 flex justify-between items-center h-full">
                <div class="flex items-center gap-3">
                    <div class="bg-neonPink text-white font-black w-8 h-8 rounded-lg flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform" id="cart-counter">0</div>
                    <div class="flex flex-col items-start">
                        <span class="font-bold text-sm">Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</span>
                        <span class="text-[10px] text-gray-400">Ø¯ÙˆØ³ Ø¹Ø´Ø§Ù† ØªØ·Ù„Ø¨</span>
                    </div>
                </div>
                <span class="font-black text-lg text-neonBlue" id="cart-total">0 Ø¬.Ù…</span>
            </div>
        </button>
    </div>

    <!-- Variant Modal -->
    <div id="variant-modal" class="fixed inset-0 z-[70] hidden flex items-end md:items-center justify-center sm:p-4">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm transition-opacity" onclick="closeVariantModal()"></div>
        <div class="bg-[#1a1a1a] w-full max-w-sm rounded-t-3xl md:rounded-3xl border-t md:border border-gray-700 relative animate-slide overflow-hidden flex flex-col max-h-[80vh]">
            <div class="w-12 h-1 bg-gray-600 rounded-full mx-auto mt-3 mb-1 md:hidden"></div>
            <div class="p-5 text-center flex-shrink-0">
                <div class="w-16 h-16 bg-gray-800 rounded-full mx-auto flex items-center justify-center mb-3 border border-gray-700">
                    <i id="modal-icon" class="fas fa-star text-3xl text-neonPink"></i>
                </div>
                <h3 id="modal-product-name" class="text-xl font-bold text-white mb-1">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</h3>
                <p class="text-gray-400 text-xs">Ø§Ø®ØªØ§Ø± Ø§Ù„Ø·Ø¹Ù… Ø£Ùˆ Ø§Ù„Ù†ÙˆØ¹ Ø§Ù„Ù…ÙØ¶Ù„ Ù„ÙŠÙƒ</p>
            </div>
            <div id="variant-options" class="grid grid-cols-2 gap-2 p-4 pt-0 overflow-y-auto custom-scrollbar"></div>
            <div class="p-4 border-t border-gray-800 bg-gray-900">
                <button onclick="closeVariantModal()" class="w-full bg-gray-800 text-white py-3 rounded-xl text-sm font-bold hover:bg-gray-700 transition">Ø¥Ù„ØºØ§Ø¡</button>
            </div>
        </div>
    </div>

    <!-- Checkout Modal (NEW) -->
    <div id="checkout-modal" class="fixed inset-0 z-[80] hidden flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-md" onclick="closeCheckoutModal()"></div>
        <div class="bg-[#151515] w-full max-w-md rounded-2xl border border-gray-700 relative animate-slide overflow-hidden shadow-2xl">
            <div class="p-6">
                <h2 class="text-2xl font-black text-white mb-2 text-center">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„ ğŸ›µ</h2>
                <p class="text-gray-400 text-xs text-center mb-6">Ø§ÙƒØªØ¨ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø³ Ø¹Ø´Ø§Ù† Ù†ÙˆØµÙ„Ùƒ Ù„Ø­Ø¯ Ø§Ù„Ø¨Ø§Ø¨.</p>
                
                <form id="checkout-form" onsubmit="event.preventDefault(); submitOrder();">
                    <div class="mb-4">
                        <label class="block text-gray-400 text-xs font-bold mb-2">Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</label>
                        <input type="text" id="customer-name" class="custom-input" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§.." required>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-gray-400 text-xs font-bold mb-2">Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ (ÙˆØ§ØªØ³Ø§Ø¨)</label>
                        <input type="tel" id="customer-phone" class="custom-input" placeholder="01xxxxxxxxx" maxlength="11" required>
                        <p class="text-red-500 text-xs hidden" id="phone-error">Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† 11 Ø±Ù‚Ù… ÙˆÙŠØ¨Ø¯Ø£ Ø¨Ù€ 01</p>
                    </div>

                    <div class="mb-6">
                        <label class="block text-gray-400 text-xs font-bold mb-2">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø¨Ø§Ù„ØªÙØµÙŠÙ„</label>
                        <textarea id="customer-address" class="custom-input h-24 resize-none" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø§Ø±Ø¹ØŒ Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…Ø§Ø±Ø©ØŒ Ø§Ù„Ø¯ÙˆØ±ØŒ Ø¹Ù„Ø§Ù…Ø© Ù…Ù…ÙŠØ²Ø©.." required></textarea>
                    </div>

                    <button type="submit" class="w-full bg-gradient-to-r from-neonPink to-purple-800 hover:from-purple-700 hover:to-neonPink text-white font-bold py-4 rounded-xl shadow-lg transition transform active:scale-95 flex justify-center items-center gap-2">
                        <span>ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</span> <i class="fas fa-paper-plane"></i>
                    </button>
                </form>
            </div>
            <button onclick="closeCheckoutModal()" class="absolute top-4 left-4 text-gray-500 hover:text-white"><i class="fas fa-times text-xl"></i></button>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 z-[60] hidden">
        <div class="absolute inset-0 bg-black/90 backdrop-blur-md transition-opacity" onclick="toggleCart()"></div>
        <div class="absolute bottom-0 left-0 right-0 bg-[#0f0f0f] rounded-t-3xl border-t border-gray-800 shadow-2xl transform transition-transform duration-300 max-h-[90vh] flex flex-col">
            <div class="w-full flex justify-center pt-3 pb-1" onclick="toggleCart()"><div class="w-12 h-1.5 bg-gray-700 rounded-full"></div></div>
            <div class="px-6 py-4 flex justify-between items-center border-b border-gray-800">
                <h2 class="text-lg font-bold text-white flex items-center gap-2"><i class="fas fa-receipt text-neonBlue"></i> Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨</h2>
                <button type="button" onclick="clearCart()" class="text-red-400 text-xs px-3 py-1.5 bg-red-900/20 rounded-full hover:bg-red-900/40 transition border border-red-900/30 flex items-center gap-1">
                    <i class="fas fa-trash-alt"></i> Ø­Ø°Ù Ø§Ù„ÙƒÙ„
                </button>
            </div>
            <div id="cart-items" class="p-4 overflow-y-auto flex-1 space-y-3 custom-scrollbar"></div>
            <div class="p-5 bg-black/60 border-t border-gray-800 pb-8">
                <div class="flex justify-between items-center mb-4 text-lg font-bold">
                    <span>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
                    <span class="text-neonBlue text-xl" id="modal-total-price">0 Ø¬.Ù…</span>
                </div>
                <button onclick="openCheckoutModal()" class="w-full bg-[#25D366] hover:bg-[#1caa53] text-white font-bold py-3.5 rounded-xl flex justify-center items-center gap-2 shadow-lg transition transform active:scale-95">
                    <i class="fab fa-whatsapp text-2xl"></i> <span>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- PRODCUT DATABASE V9 ---
        const products = [
            // --- INSTANT COFFEE & CAPPUCCINO ---
            { id: 310, name: "Ù†Ø³ÙƒØ§ÙÙŠÙ‡ Ø¨Ù„Ø§Ùƒ", price: 5, category: "grocery", icon: "fa-mug-hot", color: "text-amber-700", desc: "ÙƒÙ„Ø§Ø³ÙŠÙƒ", variants: ["ÙƒÙŠØ³ ØµØºÙŠØ± (5Ø¬)", "Ø¨Ø±Ø·Ù…Ø§Ù† 50Ø¬Ù…", "Ø¨Ø±Ø·Ù…Ø§Ù† 100Ø¬Ù…", "Ø¨Ø±Ø·Ù…Ø§Ù† 200Ø¬Ù…"] },
            { id: 311, name: "Ù†Ø³ÙƒØ§ÙÙŠÙ‡ 3Ã—1", price: 6, category: "grocery", icon: "fa-mug-hot", color: "text-amber-400", desc: "Ø£ÙƒÙŠØ§Ø³", variants: ["Ø£ÙˆØ±ÙŠØ¬ÙŠÙ†Ø§Ù„ (Ø³Ø§Ø¯Ø©)", "Ø¨Ù†Ø¯Ù‚", "ÙƒØ±Ø§Ù…ÙŠÙ„", "Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©", "ÙØ§Ù†ÙŠÙ„ÙŠØ§", "Ø±ØºÙˆØ© Ø¹Ø§Ù„ÙŠØ©"] },
            { id: 312, name: "ÙƒÙˆÙÙŠ Ø¨Ø±ÙŠÙƒ (Coffee Break)", price: 5, category: "grocery", icon: "fa-mug-hot", color: "text-yellow-500", desc: "Ù…ÙŠÙƒØ³", variants: ["Ø³Ø§Ø¯Ø©", "Ø¨Ù†Ø¯Ù‚", "ÙƒØ±Ø§Ù…ÙŠÙ„", "Ù„Ø§ØªÙŠÙ‡"] },
            { id: 313, name: "ÙƒØ§Ø¨ØªØ´ÙŠÙ†Ùˆ (ØªÙˆØ±ÙˆØ¨ÙŠÙƒØ§)", price: 8, category: "grocery", icon: "fa-mug-saucer", color: "text-orange-300", desc: "ÙƒÙŠØ³", variants: ["Ø³Ø§Ø¯Ø© (Ø±ØºÙˆØ©)", "Ø¨Ù†Ø¯Ù‚", "Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©", "Ù…ÙˆÙƒØ§"] },
            { id: 314, name: "Ø¨ÙˆÙ†Ø¬ÙˆØ±Ù†Ùˆ ÙƒÙˆÙÙŠ Ù…ÙŠÙƒØ³", price: 5, category: "grocery", icon: "fa-mug-hot", color: "text-blue-400", desc: "Ù…ÙŠÙƒØ³", variants: ["Ø³Ø§Ø¯Ø©", "Ø®Ù…Ø³ÙŠÙ†Ø© (Ø²ÙŠØ§Ø¯Ø©)", "Ø¨Ù†Ø¯Ù‚"] },
            { id: 315, name: "Ù†Ø³ÙƒØ§ÙÙŠÙ‡ Ø¬ÙˆÙ„Ø¯", price: 15, category: "grocery", icon: "fa-crown", color: "text-yellow-300", desc: "Ø¨Ø±ÙŠÙ…ÙŠÙ…", variants: ["ÙƒÙŠØ³ ØµØºÙŠØ±", "Ø¨Ø±Ø·Ù…Ø§Ù† 50Ø¬Ù…", "Ø¨Ø±Ø·Ù…Ø§Ù† 100Ø¬Ù…"] },

            // --- GROCERY (COFFEE & TEA) ---
            { id: 301, name: "Ø¨Ù† Ø¹Ø¨Ø¯ Ø§Ù„Ù…Ø¹Ø¨ÙˆØ¯", price: 45, category: "grocery", icon: "fa-mug-hot", color: "text-yellow-600", desc: "Ù‚Ù‡ÙˆØ©", variants: ["ÙØ§ØªØ­ Ø³Ø§Ø¯Ø©", "ÙØ§ØªØ­ Ù…Ø­ÙˆØ¬", "ÙˆØ³Ø· Ø³Ø§Ø¯Ø©", "ÙˆØ³Ø· Ù…Ø­ÙˆØ¬", "ØºØ§Ù…Ù‚"] },
            { id: 302, name: "Ø¨Ù† Ø£Ø­Ù…Ø¯ Ø§Ù„Ø´ÙŠØ®", price: 40, category: "grocery", icon: "fa-mug-hot", color: "text-yellow-800", desc: "Ù‚Ù‡ÙˆØ©", variants: ["ÙØ§ØªØ­", "ÙˆØ³Ø·", "Ù…Ø­ÙˆØ¬", "Ø³Ø§Ø¯Ø©"] },
            { id: 63, name: "Ø´Ø§ÙŠ Ø§Ù„Ø¹Ø±ÙˆØ³Ø©", price: 55, category: "grocery", icon: "fa-mug-hot", color: "text-red-700", desc: "Ø´Ø§ÙŠ", variants: ["40 Ø¬Ø±Ø§Ù…", "100 Ø¬Ø±Ø§Ù…", "250 Ø¬Ø±Ø§Ù…"] },
            { id: 303, name: "Ø´Ø§ÙŠ Ù„ÙŠØ¨ØªÙˆÙ†", price: 15, category: "grocery", icon: "fa-mug-hot", color: "text-yellow-400", desc: "Ø´Ø§ÙŠ", variants: ["Ø®Ø±Ø² 40Ø¬Ù…", "Ù†Ø§Ø¹Ù… 40Ø¬Ù…", "Ù†Ø§Ø¹Ù… 100Ø¬Ù…", "25 ÙØªÙ„Ø©"] },
            { id: 304, name: "Ø´Ø§ÙŠ Ø§Ù„Ø¬ÙˆÙ‡Ø±Ø©", price: 12, category: "grocery", icon: "fa-gem", color: "text-blue-400", desc: "Ø´Ø§ÙŠ", variants: ["40 Ø¬Ø±Ø§Ù…", "100 Ø¬Ø±Ø§Ù…", "250 Ø¬Ø±Ø§Ù…"] },

            // --- SNACKS & NOODLES ---
            { id: 200, name: "Ø¥Ù†Ø¯ÙˆÙ…ÙŠ (Indomie)", price: 12, category: "snacks", icon: "fa-bowl-food", color: "text-yellow-300", desc: "Ù†ÙˆØ¯Ù„Ø²", variants: ["Ø®Ø¶Ø§Ø±", "ÙØ±Ø§Ø®", "ÙØ±Ø§Ø® ÙƒØ§Ø±ÙŠ", "Ø³Ø¬Ù‚", "Ù„Ø­Ù…Ø©", "Ø¬Ù…Ø¨Ø±ÙŠ", "Ø®Ø¶Ø§Ø± Ø¬Ø§Ù…Ø¨Ùˆ (ÙƒØ¨ÙŠØ±)"] },
            { id: 201, name: "Ù†ÙˆØ¯Ù„Ø² ÙƒÙ„ÙˆØ¬Ø²", price: 12, category: "snacks", icon: "fa-bowl-food", color: "text-red-500", desc: "Ù†ÙˆØ¯Ù„Ø²", variants: ["ÙØ±Ø§Ø®", "Ø´Ø·Ø©", "Ø®Ø¶Ø§Ø±"] },
            { id: 43, name: "ÙˆÙŠÙ†Ø¯ÙˆØ² (Windows)", price: 8, category: "snacks", icon: "fa-table-cells", color: "text-green-400", desc: "Ø³Ù†Ø§ÙƒØ³", variants: ["Ø·Ù…Ø§Ø·Ù…", "Ø¬Ø¨Ù†Ø©", "Ø´Ø·Ø©"] },
            { id: 42, name: "ÙÙˆÙƒØ³ (Fox)", price: 8, category: "snacks", icon: "fa-cat", color: "text-red-500", desc: "Ø³Ù†Ø§ÙƒØ³", variants: ["Ø¬Ø¨Ù†Ø©", "ÙÙ„ÙÙ„ Ø­Ù„Ùˆ", "Ø´Ø·Ø© ÙˆÙ„ÙŠÙ…ÙˆÙ†", "ÙƒØ§ØªØ´Ø¨"] },
            { id: 44, name: "Ø¨Ø±ÙŠÙƒ (Break)", price: 8, category: "snacks", icon: "fa-cookie", color: "text-purple-400", desc: "Ø³Ù†Ø§ÙƒØ³", variants: ["Ø´Ø·Ø© ÙˆÙ„ÙŠÙ…ÙˆÙ†", "Ø¬Ø¨Ù†Ø©", "ÙƒØ§ØªØ´Ø¨"] },
            
            // --- EDITA ---
            { id: 101, name: "Ù…ÙˆÙ„ØªÙˆ (Molto)", price: 15, category: "snacks", icon: "fa-bread-slice", color: "text-red-600", desc: "ÙƒØ±ÙˆØ§Ø³ÙˆÙ†", variants: ["Ù…Ø§ÙƒØ³ Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©", "Ù…Ø§ÙƒØ³ ÙØ±Ø§ÙˆÙ„Ø©", "Ù…Ø§ÙƒØ³ Ø¬Ø¨Ù†Ø©", "Ù…ÙŠÙ†ÙŠ Ù…Ø§ÙƒØ³", "Ù…Ø§Ø¬Ù†ÙŠÙˆÙ… Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©", "Ø³Ø§Ù†Ø¯ÙˆØªØ´"] },
            { id: 102, name: "Ù‡ÙˆÙ‡ÙˆØ² (Hohos)", price: 10, category: "snacks", icon: "fa-candy-cane", color: "text-red-500", desc: "ÙƒÙŠÙƒ", variants: ["Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ© (Ø£ØµÙ„ÙŠ)", "ÙØ±Ø§ÙˆÙ„Ø©", "ÙƒØ±ÙŠÙ…Ø© Ø¥Ø¶Ø§ÙÙŠØ©", "Ø§ÙƒØ³ØªØ±ÙŠÙ…"] },
            { id: 103, name: "ØªÙˆÙŠÙ†ÙƒÙŠØ² (Twinkies)", price: 10, category: "snacks", icon: "fa-cheese", color: "text-yellow-400", desc: "ÙƒÙŠÙƒ", variants: ["ÙƒØ±ÙŠÙ…Ø© (Ø£ØµÙ„ÙŠ)", "Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©", "ÙØ±Ø§ÙˆÙ„Ø©", "Ø§ÙŠØ³ÙŠÙ†Ø¬"] },
            { id: 104, name: "ØªÙˆØ¯Ùˆ (Todo)", price: 10, category: "snacks", icon: "fa-cookie", color: "text-blue-500", desc: "ÙƒÙŠÙƒ", variants: ["Ø¨Ø±Ø§ÙˆÙ†ÙŠØ²", "Ø¨ÙˆÙ…Ø¨", "ÙØ§Ù†ÙŠÙ„ÙŠØ§", "Ù…Ø§ÙƒØ³ Ø±ÙˆÙ„", "Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©"] },
            { id: 105, name: "Ø¨ÙŠÙƒ Ø±ÙˆÙ„Ø² (Bake)", price: 10, category: "snacks", icon: "fa-circle-notch", color: "text-orange-500", desc: "Ø³Ù†Ø§ÙƒØ³", variants: ["Ù…Ù„Ø­", "Ø¨ÙŠØªØ²Ø§", "ÙƒØ§ØªØ´Ø¨", "Ø´Ø·Ø© ÙˆÙ„ÙŠÙ…ÙˆÙ†", "Ø¬Ø¨Ù†Ø© Ù…ØªØ¨Ù„Ø©", "Ø²ÙŠØªÙˆÙ†"] },

            // --- CHIPSY ---
            { id: 40, name: "Ø´ÙŠØ¨Ø³ÙŠ (Chipsy)", price: 10, category: "snacks", icon: "fa-circle-notch", color: "text-yellow-500", desc: "Ø´ÙŠØ¨Ø³", variants: ["Ù…Ù„Ø­", "Ø·Ù…Ø§Ø·Ù…", "Ø´Ø·Ø© ÙˆÙ„ÙŠÙ…ÙˆÙ†", "Ø¬Ø¨Ù†Ø© Ù…ØªØ¨Ù„Ø©", "ÙƒØ¨Ø§Ø¨", "ÙÙ„ÙÙ„ Ø­Ù„Ùˆ"] },
            { id: 41, name: "Ø´ÙŠØ¨Ø³ÙŠ ØªØ§ÙŠØ¬Ø±", price: 10, category: "snacks", icon: "fa-paw", color: "text-orange-600", desc: "ÙƒØ±Ø§Ù†Ø´ÙŠ", variants: ["Ø´Ø·Ø© ÙˆÙ„ÙŠÙ…ÙˆÙ†", "Ø¬Ø¨Ù†Ø©", "ÙÙ„ÙÙ„ Ø­Ù„Ùˆ", "Ø¬Ù…Ø¨Ø±ÙŠ", "Ø³Ø¬Ù‚ Ø´Ø±Ù‚ÙŠ"] },
            
            // --- GROCERY (STAPLES) ---
            { id: 305, name: "Ù…ÙƒØ±ÙˆÙ†Ø© (Ø£ÙƒÙŠØ§Ø³)", price: 15, category: "grocery", icon: "fa-utensils", color: "text-white", desc: "Ù†Ø´ÙˆÙŠØ§Øª", variants: ["Ø§Ù„Ù…Ù„ÙƒØ© Ø®ÙˆØ§ØªÙ…", "Ø§Ù„Ù…Ù„ÙƒØ© Ù‚Ù„Ù…", "Ø­ÙˆØ§Ø¡ Ø´Ø¹Ø±ÙŠØ©", "Ù„Ø³Ø§Ù† Ø¹ØµÙÙˆØ±"] },
            { id: 306, name: "Ø²ÙŠØª Ø·Ø¹Ø§Ù…", price: 85, category: "grocery", icon: "fa-bottle-droplet", color: "text-yellow-300", desc: "Ø²ÙŠØª", variants: ["ÙƒØ±ÙŠØ³ØªØ§Ù„ Ø¹Ø¨Ø§Ø¯", "ÙƒØ±ÙŠØ³ØªØ§Ù„ Ø°Ø±Ø©", "Ø³Ù„Ø§ÙŠØª", "Ø¹Ø§ÙÙŠØ©"] },
            { id: 307, name: "Ø³Ù…Ù†Ø©", price: 90, category: "grocery", icon: "fa-jar", color: "text-yellow-200", desc: "Ø·Ø¨Ø®", variants: ["Ø±ÙˆØ§Ø¨ÙŠ (700Ø¬Ù…)", "Ø¬Ù†Ø© (700Ø¬Ù…)", "ÙƒØ±ÙŠØ³ØªØ§Ù„"] },
            { id: 308, name: "ØªÙˆÙ†Ø§ ØµÙ† Ø´Ø§ÙŠÙ†", price: 65, category: "grocery", icon: "fa-fish", color: "text-pink-300", desc: "Ù…Ø¹Ù„Ø¨Ø§Øª", variants: ["Ù‚Ø·Ø¹", "Ù…ÙØªØªØ©", "Ø´Ø±Ø§Ø¦Ø­"] },
            { id: 309, name: "ØµÙ„ØµØ© Ø·Ù…Ø§Ø·Ù…", price: 15, category: "grocery", icon: "fa-jar", color: "text-red-600", desc: "Ø¨Ø±Ø·Ù…Ø§Ù†", variants: ["Ù‡Ø§Ø±ÙØ³Øª", "Ø¬Ø§Ø±Ø¯ÙŠÙ†ÙŠÙˆ"] },
            { id: 60, name: "Ø±Ø² Ø§Ù„Ø³Ø§Ø¹Ø©", price: 35, category: "grocery", icon: "fa-bowl-rice", color: "text-white", desc: "1 ÙƒÙŠÙ„Ùˆ", variants: ["ÙƒÙŠÙ„Ùˆ"] },
            { id: 61, name: "Ù„Ø¨Ù† (Ø­Ù„ÙŠØ¨)", price: 45, category: "grocery", icon: "fa-cow", color: "text-blue-500", desc: "1 Ù„ØªØ±/Ù†Øµ", variants: ["Ø¬Ù‡ÙŠÙ†Ø© ÙƒØ§Ù…Ù„", "Ø¬Ù‡ÙŠÙ†Ø© Ø®Ø§Ù„ÙŠ", "Ø¨Ø®ÙŠØ±Ù‡ (Ù†Øµ ÙƒÙŠÙ„Ùˆ - 22Ø¬)"] },

            // --- MOOD (CIGARETTES) ---
            { id: 1, name: "LM", price: 75, category: "mood", icon: "fa-smoking", color: "text-blue-400", desc: "Ø³Ø¬Ø§Ø¦Ø±", variants: ["Ø£Ø­Ù…Ø±", "Ø£Ø²Ø±Ù‚", "ÙØ¶ÙŠ", "Forward"] },
            { id: 2, name: "ØªØ§Ø±Ø¬Øª (Target)", price: 32, category: "mood", icon: "fa-crosshairs", color: "text-red-600", desc: "Ø³Ø¬Ø§Ø¦Ø±", variants: ["Ø£Ø­Ù…Ø±", "Ø£Ø²Ø±Ù‚"] },
            { id: 3, name: "Ù…Ø§Ø±Ù„Ø¨ÙˆØ±Ùˆ", price: 105, category: "mood", icon: "fa-crown", color: "text-yellow-500", desc: "Ø³Ø¬Ø§Ø¦Ø±", variants: ["Ø£Ø­Ù…Ø±", "Ø¬ÙˆÙ„Ø¯", "Purple Mix", "White"] },
            { id: 4, name: "Ù…ÙŠØ±ÙŠØª", price: 110, category: "mood", icon: "fa-star", color: "text-yellow-400", desc: "Ø³Ø¬Ø§Ø¦Ø±", variants: ["Ø£ØµÙØ±", "Ø£Ø²Ø±Ù‚"] },
            { id: 5, name: "ÙƒÙ„ÙŠÙˆØ¨Ø§ØªØ±Ø§", price: 35, category: "mood", icon: "fa-box-open", color: "text-green-600", desc: "Ø³Ø¬Ø§Ø¦Ø±", variants: ["Ø¨ÙˆÙƒØ³ Ø£Ø¨ÙŠØ¶", "Ø¨ÙˆÙƒØ³ Ø£Ù„ÙˆØ§Ù†", "Ø³ÙˆÙØª ÙƒÙˆÙŠÙ†", "Ø³ÙˆØ¨Ø±"] },
            { id: 6, name: "ÙˆÙŠÙ†Ø³ØªÙˆÙ†", price: 65, category: "mood", icon: "fa-w", color: "text-blue-600", desc: "Ø³Ø¬Ø§Ø¦Ø±", variants: ["Ø£Ø­Ù…Ø±", "Ø£Ø²Ø±Ù‚", "ØªÙˆØª (Berry)", "Ø³ÙŠÙ„ÙØ±"] },
            // --- DRINKS ---
            { id: 21, name: "ØªÙˆØ¨ ÙƒÙˆÙ„Ø§", price: 10, category: "drinks", icon: "fa-bottle-droplet", color: "text-red-600", desc: "ØºØ§Ø²ÙŠØ©", variants: ["ÙƒÙˆÙ„Ø§", "Ø¨Ø±ØªÙ‚Ø§Ù„", "ØªÙØ§Ø­", "Ù„ÙŠÙ…ÙˆÙ†"] },
            { id: 22, name: "Ø¨ÙŠØ¨Ø³ÙŠ ÙƒØ§Ù†Ø²", price: 15, category: "drinks", icon: "fa-glass-water", color: "text-blue-600", desc: "Ù…Ø´Ø¨Ø±Ø©", variants: ["Ø¨ÙŠØ¨Ø³ÙŠ Ø¹Ø§Ø¯ÙŠ", "Ø¨ÙŠØ¨Ø³ÙŠ Ø¯Ø§ÙŠØª", "Ø³ÙÙ† Ø£Ø¨", "Ù…ÙŠØ±Ù†Ø¯Ø§ Ø¨Ø±ØªÙ‚Ø§Ù„", "Ù…ÙŠØ±Ù†Ø¯Ø§ ØªÙØ§Ø­", "Ù…Ø§ÙˆÙ†ØªÙ† Ø¯ÙŠÙˆ"] },
            { id: 23, name: "Ø¹ØµÙŠØ± Ø¬Ù‡ÙŠÙ†Ø©", price: 12, category: "drinks", icon: "fa-apple-whole", color: "text-green-400", desc: "Ø¨ÙŠÙˆØ±", variants: ["Ù…Ø§Ù†Ø¬Ùˆ", "Ø¬ÙˆØ§ÙØ©", "Ù…ÙŠÙƒØ³", "ØªÙØ§Ø­", "Ø£Ù†Ø§Ù†Ø§Ø³", "Ø·Ù…Ø§Ø·Ù…"] },
            { id: 24, name: "Ø³ØªÙŠÙ†Ø¬ (Sting)", price: 15, category: "drinks", icon: "fa-bolt", color: "text-yellow-400", desc: "Ø·Ø§Ù‚Ø©", variants: ["Ø¬ÙˆÙ„Ø¯", "ØªÙˆØª Ø£Ø­Ù…Ø±"] },
            { id: 25, name: "Ø³Ø¨ÙŠØ±Ùˆ Ø³Ø¨Ø§ØªØ³", price: 15, category: "drinks", icon: "fa-bottle-water", color: "text-purple-500", desc: "Ù…ØµØ±ÙŠ", variants: ["Ø¹Ù†Ø¨", "Ù„ÙŠÙ…ÙˆÙ† ÙˆÙ†Ø¹Ù†Ø§Ø¹", "ÙŠÙˆØ³ÙÙŠ", "ØªÙØ§Ø­", "Ø®ÙˆØ®"] },
        ];

        let cart = JSON.parse(localStorage.getItem('akrabloko_cart')) || [];
        let currentSelectedProduct = null;

        document.addEventListener('DOMContentLoaded', () => {
            renderProducts(products);
            updateCartUI();
            
            // Load saved user data
            const savedData = JSON.parse(localStorage.getItem('akrabloko_user'));
            if(savedData) {
                document.getElementById('customer-name').value = savedData.name || '';
                document.getElementById('customer-phone').value = savedData.phone || '';
                document.getElementById('customer-address').value = savedData.address || '';
            }
        });

        // ... [Product Rendering Functions - SAME AS BEFORE] ...
        function renderProducts(items) {
            const grid = document.getElementById('products-grid');
            grid.innerHTML = items.map(p => `
                <div class="bg-gray-900 rounded-2xl p-4 neon-box flex flex-col items-center justify-between text-center h-full relative overflow-hidden group">
                    <div class="absolute inset-0 bg-gradient-to-b from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition duration-500"></div>
                    <div class="w-14 h-14 rounded-full bg-gray-800 flex items-center justify-center mb-3 border border-gray-700 group-hover:border-neonBlue transition shadow-lg relative z-10">
                        <i class="fas ${p.icon} ${p.color} text-2xl group-hover:scale-110 transition"></i>
                    </div>
                    <div class="relative z-10 w-full">
                        <h3 class="font-bold text-gray-100 text-sm mb-1 line-clamp-1">${p.name}</h3>
                        <span class="text-[10px] text-gray-500 font-bold bg-black/50 px-2 py-0.5 rounded-full inline-block mb-3">${p.desc}</span>
                        <div class="flex items-center justify-between w-full bg-black/30 rounded-xl p-1 pr-3 border border-gray-800">
                            <span class="text-neonBlue font-black text-sm">${p.price} <span class="text-[9px] text-gray-400">Ø¬.Ù…</span></span>
                            <button onclick="prepareAddToCart(${p.id})" class="w-7 h-7 rounded-lg bg-neonPink text-white flex items-center justify-center hover:bg-purple-500 transition shadow-lg active:scale-90">
                                <i class="fas fa-plus text-xs"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterProducts(cat) {
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            if(cat === 'all') renderProducts(products);
            else renderProducts(products.filter(p => p.category === cat));
        }

        function searchProducts() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            renderProducts(products.filter(p => p.name.toLowerCase().includes(query)));
        }

        function prepareAddToCart(id) {
            const product = products.find(p => p.id === id);
            if (product.variants && product.variants.length > 0) {
                openVariantModal(product);
            } else {
                addToCart(product, null);
            }
        }

        function openVariantModal(product) {
            currentSelectedProduct = product;
            document.getElementById('modal-product-name').innerText = product.name;
            document.getElementById('modal-icon').className = `fas ${product.icon} text-3xl ${product.color}`;
            const container = document.getElementById('variant-options');
            container.innerHTML = product.variants.map(variant => `
                <button onclick="selectVariant('${variant}')" class="bg-gray-800 hover:bg-neonBlue hover:text-black hover:font-black text-gray-200 py-3 px-2 rounded-xl text-xs font-bold transition border border-gray-700 hover:border-neonBlue flex items-center justify-center text-center h-14">
                    ${variant}
                </button>
            `).join('');
            document.getElementById('variant-modal').classList.remove('hidden');
        }

        function closeVariantModal() {
            document.getElementById('variant-modal').classList.add('hidden');
            currentSelectedProduct = null;
        }

        function selectVariant(variantName) {
            if (currentSelectedProduct) {
                addToCart(currentSelectedProduct, variantName);
                closeVariantModal();
            }
        }

        function addToCart(product, variant) {
            const cartItemId = variant ? `${product.id}-${variant}` : `${product.id}`;
            const displayName = variant ? `${product.name} (${variant})` : product.name;
            const exists = cart.find(i => i.cartItemId === cartItemId);
            
            if(exists) exists.qty++;
            else cart.push({
                cartItemId: cartItemId,
                id: product.id,
                name: displayName,
                price: product.price,
                qty: 1
            });
            saveCart();
            updateCartUI();
            if(navigator.vibrate) navigator.vibrate(50);
        }

        function removeFromCart(cartItemId) {
            cart = cart.filter(i => i.cartItemId !== cartItemId);
            saveCart();
            updateCartUI();
            if(cart.length === 0) toggleCart();
        }

        function changeQty(cartItemId, delta) {
            const item = cart.find(i => i.cartItemId === cartItemId);
            if(item) {
                item.qty += delta;
                if(item.qty <= 0) removeFromCart(cartItemId);
                else {
                    saveCart();
                    updateCartUI();
                }
            }
        }

        function clearCart() {
            cart = [];
            saveCart();
            updateCartUI();
        }

        function saveCart() {
            localStorage.setItem('akrabloko_cart', JSON.stringify(cart));
        }

        function updateCartUI() {
            const count = cart.reduce((a, b) => a + b.qty, 0);
            const total = cart.reduce((a, b) => a + (b.price * b.qty), 0);
            document.getElementById('cart-counter').innerText = count;
            document.getElementById('cart-total').innerText = total + ' Ø¬.Ù…';
            document.getElementById('modal-total-price').innerText = total + ' Ø¬.Ù…';
            const itemsContainer = document.getElementById('cart-items');
            if(cart.length === 0) {
                itemsContainer.innerHTML = `<div class="text-center text-gray-500 py-10 flex flex-col items-center"><i class="fas fa-shopping-basket text-4xl mb-3 opacity-20"></i>Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©</div>`;
            } else {
                itemsContainer.innerHTML = cart.map(item => `
                    <div class="flex justify-between items-center bg-gray-900 p-3 rounded-xl border border-gray-800">
                        <div class="flex flex-col">
                            <h4 class="font-bold text-white text-xs mb-1">${item.name}</h4>
                            <span class="text-[10px] text-neonBlue font-bold">${item.price} Ø¬.Ù…</span>
                        </div>
                        <div class="flex items-center gap-2 bg-black rounded-lg px-2 py-1">
                            <button onclick="changeQty('${item.cartItemId}', -1)" class="text-gray-400 hover:text-white px-1 font-bold">-</button>
                            <span class="font-bold text-xs w-4 text-center text-white">${item.qty}</span>
                            <button onclick="changeQty('${item.cartItemId}', 1)" class="text-green-400 hover:text-white px-1 font-bold">+</button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function toggleCart() {
            document.getElementById('cart-modal').classList.toggle('hidden');
        }

        // --- NEW CHECKOUT & VALIDATION LOGIC ---

        function openCheckoutModal() {
            if(cart.length === 0) return alert('Ø§Ù„Ø³Ù„Ø© ÙØ§Ø±ØºØ©!');
            toggleCart(); // Close cart modal
            document.getElementById('checkout-modal').classList.remove('hidden');
        }

        function closeCheckoutModal() {
            document.getElementById('checkout-modal').classList.add('hidden');
        }

        function submitOrder() {
            // Get values
            const name = document.getElementById('customer-name').value.trim();
            const phone = document.getElementById('customer-phone').value.trim();
            const address = document.getElementById('customer-address').value.trim();
            const phoneError = document.getElementById('phone-error');

            // Reset error
            phoneError.classList.add('hidden');

            // Basic Validation
            if (!name || !phone || !address) {
                alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ø´Ø§Ù† Ù†Ù‚Ø¯Ø± Ù†ÙˆØµÙ„Ùƒ");
                return;
            }

            // Phone Validation (Must be 11 digits and start with 01)
            const phoneRegex = /^01[0125][0-9]{8}$/;
            if (!phoneRegex.test(phone)) {
                phoneError.classList.remove('hidden');
                return; // Stop here
            }

            // Save user data for next time
            localStorage.setItem('akrabloko_user', JSON.stringify({ name, phone, address }));

            // Phone Number to send TO (Store Owner)
            const storePhone = "201000000000"; 

            // Construct Message
            let msg = `*Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù† ØªØ·Ø¨ÙŠÙ‚ Ø£Ù‚Ø±Ø¨Ù„ÙˆÙƒÙˆ* ğŸš€\n\n`;
            msg += `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${name}\n`;
            msg += `ğŸ“± *Ø±Ù‚Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„:* ${phone}\n`;
            msg += `ğŸ“ *Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:* ${address}\n`;
            msg += `----------------------------\n`;
            msg += `*Ø§Ù„Ø·Ù„Ø¨Ø§Øª:* \n`;
            
            cart.forEach(item => { 
                msg += `â–ªï¸ ${item.name} (Ø¹Ø¯Ø¯ ${item.qty}) = ${item.price * item.qty}Ø¬\n`; 
            });

            const total = cart.reduce((a, b) => a + (b.price * b.qty), 0);
            msg += `----------------------------\n`;
            msg += `ğŸ’° *Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:* ${total} Ø¬Ù†ÙŠÙ‡`;

            // Open WhatsApp
            window.open(`https://wa.me/${storePhone}?text=${encodeURIComponent(msg)}`, '_blank');
            
            // Close modal and clear cart (optional)
            closeCheckoutModal();
            cart = [];
            saveCart();
            updateCartUI();
        }
    </script>
</body>
</html>
